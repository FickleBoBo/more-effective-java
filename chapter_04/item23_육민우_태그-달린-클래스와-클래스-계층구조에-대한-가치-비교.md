# 태그 달린 클래스와 클래스 계층 구조에 대한 가치 비교



## item23 - 태그 달린 클래스보다는 클래스 계층구조를 활용하라

### 🔍 내용 요약

여러가지 의미를 표현할 수 있으며, 그중 현재 표현하는 의미를 태그 값으로 알려주는 클래스를 본 적이 있을 수 있다. 
이러한 태그 달린 클래스(p142 기준)는 열거 타입 선언, 태그 필드, swith 문 등 쓸데없는 코드가 많을 뿐더러 가독성도 나쁘고 
다른 의미를 위한 코드도 언제나 함께 하니 메모리도 많이 사용한다. 
엉뚱한 필드를 초기하해도 런타임에서야 문제가 드러나며 또 다른 의미를 추가하려면 코드를 수정해야 한다. 
요약하자면 태그 달린 클래스는 장황하고, 오류를 내기 쉽고, 비효율적인데 이보다 훨씬 나은 수단으로 클래스 계층구조를 추천한다. 

<br>

--------------------------------------------------

### 🧐 심화 탐구
교재에서 제시한 태그 달린 클래스의 예시와 클래스 계층구조의 예시를 보며 오히려 클래스 계층구조가 더 익숙한 형태여서 놀랐었다. 
enum의 경우 존재 자체는 알고 있었지만 사용해본적은 없는 기능이었는데, 다양한 역할을 수행할 수 있어보여서 학습이 필요해보였다. 

필자가 핵심 정리에서도 태그 달린 클래스를 써야 하는 상황은 거의 없으며 클래스 계층구조로 리팩터링하는 걸 고민해보는 것을 권장하는 걸로 봐서 
정말 사용할 이유가 딱히 없어 보였으며 클래스 계층구조가 본인에겐 더 익숙한 프로그래밍 방식이어서 충분히 받아드릴 수 있었다. 

이번 심화 탐구 주제는 태그 달린 클래스가 왜 별로이며, 클래스 계층구조가 왜 좋을까에 대한 주제로 가볍게 탐구를 진행해보고자 한다. 

코드 23-1의 코드는 Figure라는 클래스에서 RECTANGLE과 CIRCLE 두 가지를 다루는 것이 클래스의 목적으로 보였다. 
이는 하나의 클래스에서 다양한 도형을 다루려는 것이 작성 의도로 보였는데, 하나의 클래스가 다양한 역할을 수행하는 것처럼 보여 그렇게 좋은 방식은 아닐 수 있겠다는 생각이 들었다.(이 부분이 객체 지향 프로그래밍의 단일 책임 원칙에 위배되는지는 판단하기 어려웠다.) 
다른 도형이 추가 될 경우 클래스를 수정하며 Figure 안에서 모든 역할을 할 것처럼 보였는데, 이후 나올 클래스 계층구조를 보기 전까지는 그래도 괜찮을 수 있을 것 같았다. 

코드 23-2의 코드는 Figure를 추상 클래스로 만들고 RECTANGLE과 CIRCLE이 이를 확장한 구조이다. 
이 경우 얼핏보면 23-1과 모양만 다르지 않나 싶을 수 있지만 많은 차이점이 있다고 생각한다. 
- 먼저 다른 도형에 대해서도 작성하고 싶을 경우, 기존의 코드를 수정하지 않고 확장한 클래스만 새롭게 작성하면 된다. 
이는 코드의 재사용성이 높은 것이 장점인 객체 지향 프로그래밍의 장점과 부합한 구조로 보인다. 
- 가독성 측면에서도 태그 달린 클래스만 써온 개발자라면 몰라도 일반적으로는 후자가 더 좋다고 판단할 것이라 생각한다. 
- 성능적 측면에서는 공감하기 어려운 부분이 있었는데, `필드들을 final로 선언하려면 해당 의미에 쓰이지 않는 필드들까지 생성자에서 초기화해야한다` 이 부분이다.
쓰이지 않는 필드들을 초기화할 이유를 찾지 못했다. 다음 코드처럼 선언과 동시에 초기화하지 않는다고 오류가 발생하지도 않는데 교재에선 이 부분이 단점 중 하나로 지적됐었다. 
```java
public class Test {
    public static void main(String[] args) {
        int x;
        final int y;
        x = 1;
        System.out.println(x);  // 1
    }
}
```
- 확장성 측면에서 Figure는 파라미터의 개수가 다른 두 개의 생성자로 원와 사각형을 구분하고 있는 것으로 보인다. 
이 경우, 구체 혹은 삼각형과 같이 파라미터 개수가 겹치는 도형을 추가하고 싶을 때, 개발자를 골치아프게 할 것 같았다. 
- 마지막으로 `area()`와 같이 공통으로 사용하는 메서드에 대해 swith문을 사용해야 하는 것이 확장성과 가독성을 크게 해친다고 생각한다.

--------------------------------------------------

### 🧠 어려웠던 점

- 필자의 권장 방향과 나름 동일한 사고를 하고 있다고 생각해서 탐구의 주제를 선정하는 것이 어려웠다.
  - enum의 사용법 및 활용 방안과 현 주제 두 가지 탐구 주제를 갖고 고민했었는데, 현 아이템과 관련이 있기도 하고 장점에 대해 배우려면 단점이 단점인 이유를 아는 것도 중요할 것 같아서 위 주제로 탐구를 진행했다. 
